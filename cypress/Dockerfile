# WARNING: this file was autogenerated by generate-included-image.js
# using
#   npm run add:included -- 10.0.0 cypress/browsers:node16.14.2-slim-chrome100-ff99-edge
#
# build this image with command
#   docker build -t cypress/included:10.0.0 .
#
FROM cypress/browsers:node14.17.0-chrome91-ff89

RUN mkdir /cypress
#install Sudo
RUN apt-get update && apt-get install -y sudo

#change the user so it can use sudo
RUN adduser --disabled-password --gecos "" user  \
    && echo 'user:user' | chpasswd \
    && adduser user sudo \
    && echo 'user ALL=(ALL) NOPASSWD:ALL' >> /etc/sudoers


WORKDIR /cypress

COPY ./package.json .
COPY ./cypress.config.ts .
COPY ./tsconfig.json .
COPY ./cypress ./cypress


WORKDIR /cypress

RUN sudo npm install
RUN npx cypress version
RUN npx cypress verify
RUN npx cypress open


